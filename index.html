<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Forex Market Time (Algeria)</title>
  <style>
    body {
      font-family: sans-serif;
      background: #0f172a;
      color: white;
      padding: 2rem;
    }
    h1 {
      color: #22c55e;
    }
    .session {
      margin-bottom: 20px;
    }
    .bar {
      height: 10px;
      background: #334155;
      border-radius: 4px;
      overflow: hidden;
    }
    .bar-fill {
      height: 100%;
      background: #4ade80;
      transition: width 0.3s ease;
    }
    .open {
      color: #4ade80;
    }
    .closed {
      color: #f87171;
    }
  </style>
</head>
<body>
  <h1>Forex Market Sessions (Algeria Time)</h1>
  <p id="currentTime"></p>
  <div id="sessions"></div>
  <p id="nextSession"></p>

  <script>
    const sessions = [
      { name: 'Frankfurt', open: '07:00', close: '15:00' },
      { name: 'London',    open: '08:00', close: '16:00' },
      { name: 'New York',  open: '13:00', close: '21:00' },
      { name: 'Sydney',    open: '23:00', close: '07:00' },
      { name: 'Tokyo',     open: '00:00', close: '08:00' }
    ];

    function parseTime(str) {
      const [h, m] = str.split(':').map(Number);
      const d = new Date();
      d.setHours(h, m, 0, 0);
      return d;
    }

    function formatAMPM(date) {
      let hours = date.getHours();
      const minutes = date.getMinutes();
      const ampm = hours >= 12 ? 'PM' : 'AM';
      hours = hours % 12 || 12;
      const mins = minutes < 10 ? '0' + minutes : minutes;
      return `${hours}:${mins} ${ampm}`;
    }

    function update() {
      const now = new Date();
      const currentTime = formatAMPM(now);
      document.getElementById('currentTime').textContent = `⏱️ Current time (Algiers): ${currentTime}`;

      const container = document.getElementById('sessions');
      container.innerHTML = '';
      let next = null;

      sessions.forEach(s => {
        const open = parseTime(s.open);
        let close = parseTime(s.close);
        if (close <= open) close.setDate(close.getDate() + 1); // overnight

        const total = close - open;
        const elapsed = now - open;
        const isOpen = elapsed >= 0 && now <= close;
        const pct = Math.max(0, Math.min(100, (elapsed / total) * 100));

        const sessionDiv = document.createElement('div');
        sessionDiv.className = 'session';
        sessionDiv.innerHTML = `
          <h3>${s.name}</h3>
          <p>${formatAMPM(open)} → ${formatAMPM(close)}</p>
          <p class="${isOpen ? 'open' : 'closed'}">${isOpen ? '🟢 Open' : '🔴 Closed'}</p>
          <div class="bar"><div class="bar-fill" style="width: ${pct}%; background: ${isOpen ? '#4ade80' : '#f87171'};"></div></div>
        `;
        container.appendChild(sessionDiv);

        if (!isOpen && open > now && (!next || open < next.time)) {
          next = { name: s.name, time: open };
        }
      });

      const nextText = document.getElementById('nextSession');
      if (next) {
        const diff = next.time - now;
        const h = String(Math.floor(diff / 3600000)).padStart(2, '0');
        const m = String(Math.floor((diff % 3600000) / 60000)).padStart(2, '0');
        const s = String(Math.floor((diff % 60000) / 1000)).padStart(2, '0');
        nextText.textContent = `🕒 Next session: ${next.name} opens in ${h}:${m}:${s}`;
      } else {
        nextText.textContent = '';
      }
    }

    update();
    setInterval(update, 1000);
  </script>
</body>
</html>
